<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/style.css?v=' | append: site.github.build_revision | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Mobile menu toggle button -->
  <button class="menu-toggle" id="menuToggle" style="display: none;">
    <i class="fas fa-bars"></i>
  </button>

  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="{{ '/assets/images/ios-logo.png' | relative_url }}" alt="iOS Development" class="sidebar-logo">
      <h1 class="sidebar-title">iOS Dev Guide</h1>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' %}class="active"{% endif %}>Home</a></li>

        <h3>Getting Started</h3>
        <li><a href="{{ '/1/1.1-introduction' | relative_url }}" {% if page.url contains '/1/1.1-introduction' %}class="active"{% endif %}>Introduction to Unsplash</a></li>
        <li><a href="{{ '/2/2-git' | relative_url }}" {% if page.url contains '/2/2-git' %}class="active"{% endif %}>Version Control with Git</a></li>

        <h3>Architecture</h3>
        <li><a href="{{ '/3/3-app-arch' | relative_url }}" {% if page.url contains '/3/3-app-arch' %}class="active"{% endif %}>Application Architecture</a></li>
        <li><a href="{{ '/3/3.1/3.1-introducing' | relative_url }}" {% if page.url contains '/3/3.1/3.1-introducing' %}class="active"{% endif %}>- Introduction</a></li>
        <li><a href="{{ '/3/3.2/3.2-feature-design' | relative_url }}" {% if page.url contains '/3/3.2/3.2-feature-design' %}class="active"{% endif %}>- Feature Design</a></li>
        <li><a href="{{ '/3/3.3/3.3-conclusion' | relative_url }}" {% if page.url contains '/3/3.3/3.3-conclusion' %}class="active"{% endif %}>- Conclusion</a></li>

        <h3>UIKit 1</h3>
        <li><a href="{{ '/4/4-uikit' | relative_url }}" {% if page.url contains '/4/4-uikit' %}class="active"{% endif %}>UIKit Basics - Part 1</a></li>

        <h3>MVVM</h3>
        <li><a href="{{ '/5/5-mvvm' | relative_url }}" {% if page.url contains '/5/5-mvvm' %}class="active"{% endif %}>MVVM & Observable</a></li>

        <h3>Unit Testing</h3>
        <li><a href="{{ '/6/6-unit-testing' | relative_url }}" {% if page.url contains '/6/6-unit-testing' %}class="active"{% endif %}>Unit Testing</a></li>

        <h3>Navigation</h3>
        <li><a href="{{ '/7/7.1-navigation' | relative_url }}" {% if page.url contains '/7/7.1-navigation' %}class="active"{% endif %}>UIKit Navigation</a></li>

        <h3>Networking</h3>
        <li><a href="{{ '/8/8.1-networking-1' | relative_url }}" {% if page.url contains '/8/8.1-networking-1' %}class="active"{% endif %}>Networking Basics</a></li>
        <li><a href="{{ '/10/10.1-more-networking' | relative_url }}" {% if page.url contains '/10/10.1-more-networking' %}class="active"{% endif %}>Advanced Networking</a></li>

        <h3>UIKit 2</h3>
        <li><a href="{{ '/9/9.1-uikit' | relative_url }}" {% if page.url contains '/9/9.1-uikit' %}class="active"{% endif %}>UIKit Basics - Part 2</a></li>

        <h3>Core Data</h3>
        <li><a href="{{ '/11/11-persistence' | relative_url }}" {% if page.url contains '/11/11-persistence' %}class="active"{% endif %}>Core Data Persistence</a></li>
      </ul>
    </nav>
  </div>

  <div class="main-content">
    <header>
      <h1>{{ page.title | default: "iOS Development Guide" }}</h1>
    </header>

    <section class="content-section">
      {{ content }}
    </section>

    <footer>
      <div class="footer-container">
        <div class="footer-logo">
          <img src="{{ '/assets/images/endava-logo.png' | relative_url }}" alt="Endava Logo" class="footer-logo-img">
        </div>
        <p>&copy; 2025 iOS Roadmap Plan</p>
      </div>
    </footer>
  </div>

  <script>
    // Fix Markdown links to properly handle HTML extensions in GitHub Pages
    document.addEventListener('DOMContentLoaded', function() {
      const links = document.querySelectorAll('a[href$=".md"]');
      links.forEach(link => {
        const href = link.getAttribute('href');
        link.setAttribute('href', href.replace(/\.md$/, ''));
      });

      // Mobile menu toggle
      const menuToggle = document.getElementById('menuToggle');
      const sidebar = document.getElementById('sidebar');

      // Show menu toggle button on mobile
      if (window.innerWidth <= 768) {
        menuToggle.style.display = 'block';
      }

      window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
          menuToggle.style.display = 'block';
        } else {
          menuToggle.style.display = 'none';
          sidebar.classList.remove('open');
        }
      });

      menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('open');
        if (sidebar.classList.contains('open')) {
          menuToggle.innerHTML = '<i class="fas fa-times"></i>';
        } else {
          menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
        }
      });

      // Highlight code blocks with proper headers
      const codeBlocks = document.querySelectorAll('pre > code');
      codeBlocks.forEach(block => {
        // Only process blocks that aren't already wrapped
        if (block.parentNode.parentNode.className !== 'code-block') {
          const language = block.className.match(/language-(\w+)/);
          const languageName = language ? language[1] : 'code';

          // Create wrapper
          const wrapper = document.createElement('div');
          wrapper.className = 'code-block';

          // Create header
          const header = document.createElement('div');
          header.className = 'code-header';

          // Language label
          const label = document.createElement('span');
          label.className = 'code-type';
          label.textContent = languageName.charAt(0).toUpperCase() + languageName.slice(1);

          header.appendChild(label);

          // Replace the pre element with our enhanced version
          const pre = block.parentNode;
          pre.parentNode.insertBefore(wrapper, pre);
          wrapper.appendChild(header);
          wrapper.appendChild(pre);
        }
      });
    });
  </script>
</body>
</html>
